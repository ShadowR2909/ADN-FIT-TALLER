{% extends 'base.html' %}
{% load static %}

{% block title %}Panel Principal - Gimnasio{% endblock %}

{% block content %}
<div class="container mt-4">
    
    <!-- Título y Rol -->
    <div class="row mb-4">
        <div class="col-12">
            <!-- Usamos user.get_username para obtener el nombre de usuario -->
            <h1 class="text-white">Bienvenido/a, {{ user.get_username|capfirst }}</h1>
            <p class="lead text-white-50">Rol actual: <span class="badge bg-success">{{ user.profile.rol|capfirst }}</span></p>
        </div>
    </div>
    
    <div class="card p-4 bg-dark text-white shadow">
        <h2>Panel de Acceso Rápido</h2>
        <p>Utiliza los enlaces a continuación según tu rol y permisos.</p>
        
        <!-- Lógica de Enlaces por Rol -->
        {% with user.profile.rol as rol %}
            
            {% if rol == "Administrador" %}
                <h4 class="mt-3 text-warning">Tareas de Administración</h4>
                <div class="d-flex flex-wrap gap-2">
                    <a href="{% url 'gestion_usuarios' %}" class="btn btn-outline-warning">Gestión de Usuarios</a>
                    <!-- Asumimos que estas URLs existen en gestion/urls.py -->
                    <a href="{% url 'gestion_planes' %}" class="btn btn-outline-warning">Gestionar Planes y Precios</a>
                    <a href="{% url 'gestion_membresias' %}" class="btn btn-outline-warning">Gestionar Membresías</a>
                    <a href="{% url 'gestion_clases' %}" class="btn btn-outline-warning">Gestionar Clases</a>
                </div>
            
            {% elif rol == "Entrenador" %}
                <h4 class="mt-3 text-info">Tareas de Entrenador</h4>
                <div class="d-flex flex-wrap gap-2">
                    <a href="{% url 'asignar_rutinas' %}" class="btn btn-outline-info">Asignar Rutinas</a>
                    <a href="{% url 'lista_alumnos' %}" class="btn btn-outline-info">Ver Mis Alumnos (Socios)</a>
                </div>

            {% elif rol == "Socio" %}
                <h4 class="mt-3 text-success">Mi Información</h4>
                <div class="d-flex flex-wrap gap-2">
                    <a href="{% url 'mi_plan' %}" class="btn btn-outline-success">Mi Plan/Membresía</a>
                    <a href="{% url 'mi_rutina' %}" class="btn btn-outline-success">Mi Rutina</a>
                    <a href="{% url 'mis_clases' %}" class="btn btn-outline-success">Mis Clases</a>
                </div>
            
            {% endif %}
            
            <h4 class="mt-4 text-primary">Configuración General</h4>
            <a href="{% url 'editar_perfil' %}" class="btn btn-outline-primary">Editar Perfil</a>

        {% endwith %}
        
    </div>

</div>
{% endblock content %}